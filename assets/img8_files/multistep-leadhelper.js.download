var _createClass=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var MltLeadHelperClass=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"getCountryCode",value:function(){return gd.config.countryCode}},{key:"getLangCode",value:function(){return gd.config.langCode}},{key:"getBusinessUnit",value:function(){return gd.config.businessUnit}},{key:"getEnquiryUrl",value:function(){return gd.config.enquiryForm}},{key:"detectCity",value:function(){return fetch("https://extreme-ip-lookup.com/json/").then((function(t){return t.json()}))}},{key:"addDependency",value:function(t){var e;null==document.querySelector('script[src="'+gd.config.baseUrl+'common/js/vendor-service/webrtc/infobip.js"]')&&((e=document.createElement("script")).setAttribute("type","text/javascript"),e.setAttribute("defer","defer"),e.setAttribute("src",gd.config.baseUrl+"common/js/vendor-service/webrtc/infobip.js"),document.querySelector("head").appendChild(e));null==document.querySelector('script[src="//rtc.cdn.infobip.com/latest/infobip.rtc.js"]')&&((e=document.createElement("script")).setAttribute("type","text/javascript"),e.setAttribute("defer","defer"),e.setAttribute("src","//rtc.cdn.infobip.com/latest/infobip.rtc.js"),document.querySelector("head").appendChild(e))}},{key:"savePageVisit",value:function(t,e,a){var r=window.localStorage.getItem("user_visited_pages");if(r){r=JSON.parse(r);var n=new FormData;return n.append("id",t),n.append("eid",t),n.append("name",e),n.append("mobile",a),r.forEach((function(t,e){n.append("items["+e+"][page]",t.page),n.append("items["+e+"][brand]",t.brand),n.append("items["+e+"][model]",t.model),n.append("items["+e+"][date]",t.date)})),fetch("/co-reg/save-page-visit",{method:"POST",body:n}).then((function(t){return t.json()})).then((function(t){""!=t.message&&window.localStorage.removeItem("user_visited_pages")}))}}}]),t}();document.querySelector("body").addEventListener("click",(function(t){for(var e=t.target;e&&"function"==typeof e.hasAttribute;){if(e.hasAttribute("data-mlt-lead")&&"FormOpen"==e.getAttribute("data-mlt-lead")){var a=new CookiesStorage,r={business_unit:e.getAttribute("data-business-unit"),lang_code:gd.config.langCode,brand:e.getAttribute("data-brand"),brand_slug:e.getAttribute("data-brand-slug"),model:e.getAttribute("data-model"),model_slug:e.getAttribute("data-model-slug"),variant_slug:e.getAttribute("data-variant-slug"),lead_type:e.getAttribute("data-lead-type"),webid:e.getAttribute("data-webid"),wa_form_type:e.getAttribute("data-waFormType"),body_type:e.getAttribute("data-body-type"),model_status:e.getAttribute("data-model-status"),url:e.getAttribute("data-url"),platform:e.getAttribute("data-platform"),leadform_location:e.getAttribute("data-leadform-location"),domain:e.getAttribute("data-domain"),image:e.getAttribute("data-image"),button_type:e.getAttribute("data-buttontype"),pagetype:e.getAttribute("data-pagetype"),template_type_new:e.getAttribute("data-templatetype"),dse_id:e.getAttribute("data-dseid"),outlet_id:e.getAttribute("data-outletid"),packet_id:e.getAttribute("data-packetid"),ld_pack_id:e.getAttribute("data-ldpackid"),utm_medium:a.getUtmMedium(),utm_source:a.getUtmSource(),utm_campaign:a.getUtmCampaign(),lop:a.getLop(),city:gd.user.getCity()?gd.user.getCity():e.getAttribute("data-city")};e.getAttribute("data-downpayment")&&(r.steps=[{finance:"yes",downpayment:e.getAttribute("data-downpayment"),interest:e.getAttribute("data-interest"),tenure:e.getAttribute("data-tenure")}]);var n=new CookiesStorage,i=new MltLeadHelperClass;new MltLeadFormClass(r,n,i);break}e=e.parentNode}}));