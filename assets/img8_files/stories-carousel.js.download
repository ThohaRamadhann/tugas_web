class SlideStories{constructor(t){this.slide=document.querySelector(`[data-slide="${t}"]`),this.active=0,this.init()}activeSlide(t){this.active=t;let e=document.getElementsByClassName("slide-prev"),i=document.getElementsByClassName("slide-next");this.items.forEach(t=>t.classList.remove("active")),this.items[t].classList.add("active"),this.thumbItems.forEach(t=>t.classList.remove("active")),this.thumbItems[t].classList.add("active"),this.loadImage(t);for(let t=this.thumbItems.length-1;t>=this.active;t--)this.thumbItems[t].classList.remove("visited");if(this.active>0)for(let t=0;t<this.active;t++)this.thumbItems[t].classList.add("visited");if(0===this.active?e[0].disabled=!0:e[0].disabled=!1,this.active!==this.items.length-1){this.autoSlide(),i[0].disabled=!1;let t=this.items[this.items.length-1];t.classList.contains("videos")&&null!=t.dataset.playingState&&t.dataset.playingState==YT.PlayerState.PLAYING&&t.querySelector("iframe").contentWindow.postMessage('{"event":"command", "func":"stopVideo", "args":""}',"*")}else{i[0].disabled=!0;let e=this.items[t];this.items[t].classList.contains("videos")&&setTimeout(()=>{new YT.Player("cb_overview_player",{width:"100%",videoId:document.querySelector("#cb_overview_player").dataset.youtubekey,youtubeVideoVars:{playsinline:1},events:{onStateChange:function(t){e.setAttribute("data-playing-state",t.data)}}})},100)}}prev(){this.active>0&&this.activeSlide(this.active-1)}next(){this.active===this.items.length-1&&this.thumbItems.forEach(t=>t.classList.remove("visited")),this.active<this.items.length-1?this.activeSlide(this.active+1):this.activeSlide(this.items.length-1)}addNavigation(){const t=this.slide.querySelector(".slide-next"),e=this.slide.querySelector(".slide-prev");t.addEventListener("click",this.next),e.addEventListener("click",this.prev)}addThumbItems(){this.thumb.innerHTML="",this.items.forEach(()=>this.thumb.innerHTML+="<div><span></span></div>"),this.thumbItems=Array.from(this.thumb.children),this.thumbItems.forEach((t,e)=>{t.onclick=function(t){this.activeSlide(e)}.bind(this)})}autoSlide(){clearTimeout(this.timeout),this.timeout=setTimeout(this.next,2e4)}init(){this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.items=this.slide.querySelectorAll(".slide-items > *"),this.thumb=this.slide.querySelector(".slide-thumb"),this.addThumbItems(),this.addNavigation(),this.activeSlide(0)}loadImage(t){const e=Array.from(this.items[t].querySelectorAll(".lazy"));if("IntersectionObserver"in window){const t=new IntersectionObserver((e,i)=>{e.forEach(e=>{if(e.isIntersecting){const i=e.target;i.classList.remove("lazy"),i.classList.add("lazyLoaded"),i.src=i.dataset.src,t.unobserve(i)}})});e.forEach(e=>t.observe(e))}}}window.addEventListener("load",(function(){document.querySelector("[data-slide='slide']")&&new SlideStories("slide"),document.querySelector("[data-slide='slideEv']")&&new SlideStories("slideEv")}));