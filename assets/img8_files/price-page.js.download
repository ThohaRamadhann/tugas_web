let modelReviewTag=document.getElementById("model-review-anchortag"),modelReviewhref=null!=modelReviewTag?modelReviewTag.href:null;function getReview(){var e=document.querySelectorAll("#mode-review-tag li");e.length>0&&e[1].classList.contains("active-review-tab")&&document.getElementById(e[1].id).click()}document.querySelectorAll("#mode-review-tag li").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll("#mode-review-tag li").forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),gd.common.addLoader(document.querySelector("#user__review-list-panel")),fetch("/model/reviews?categorySlug="+e.dataset.category+"&brandSlug="+e.dataset.brand+"&modelSlug="+e.dataset.model+"&parentModelSlug="+e.dataset.parentModelSlug+"&filter="+e.dataset.slug+"&page=1&limit=10&langCode="+gd.config.langCode).then(e=>e.json()).then(t=>{gd.common.removeLoader(),document.querySelector("#user__review-list-panel").innerHTML=t.html,null!=modelReviewhref&&(document.getElementById("model-review-anchortag").href=modelReviewhref+"?tag="+e.dataset.slug),"undefined"!=typeof Splide&&document.querySelector("#user__review-list-panel .splide-type-1")&&new Splide(document.querySelector("#user__review-list-panel .splide-type-1"),{fixedWidth:"260px",gap:"20px",lazyLoad:"nearby",pagination:!1,padding:{right:"20px",left:"20px"},perPage:2,perMove:1}).mount()})})}),document.querySelectorAll('[data-popup-modal="variant-selection"] .model-change__variant').forEach(e=>{e.addEventListener("click",t=>{var a=t.currentTarget,o=a.getAttribute("data-url"),r=a.getAttribute("data-categorySlug"),l=a.getAttribute("data-brandSlug"),n=a.getAttribute("data-citySlug"),d=a.getAttribute("data-modelSlug"),c=a.getAttribute("data-variantSlug"),i=a.getAttribute("data-variantId"),s=a.getAttribute("data-variantName"),u=a.getAttribute("data-variantPrice");document.querySelector('[data-popup-modal="variant-selection"]').classList.remove("is--visible"),bodyBlackout.classList.remove("is-blacked-out"),document.body.classList.remove("o-hidden"),"ServiceCostTab"==dataLayer[0].page_type?(gd.common.addLoader(document.querySelector(".user-bucket-loader")),fetch("/model/service-data-by-variant?categorySlug="+r+"&brandSlug="+l+"&modelSlug="+d+"&variantSlug="+c).then(e=>e.json()).then(e=>{gd.common.removeLoader();var t="<span class='f-14 block'>"+s+"</span><span class='f-13block'>"+u+"</span><i class='icon-arrow-left rotate-minus-90 inline-block'></i>";document.querySelector("#variant-selector-id").innerHTML=t,document.querySelector("#user__bucket-list-panel").innerHTML=e.html,document.querySelector("#dynamic-content").innerHTML=e.dynamicText})):(gd.common.addLoader(document.querySelector("#user__bucket-list-panel")),fetch("/"+o+"?categorySlug="+r+"&brandSlug="+l+"&modelSlug="+d+"&citySlug="+n+"&variantId="+i+"&lang_code="+gd.config.langCode).then(e=>e.json()).then(e=>{gd.common.removeLoader();var t="<span class='f-14 block'>"+s+"</span><span class='f-13block'>"+u+"</span><i class='icon-arrow-left rotate-minus-90 inline-block'></i>";document.querySelector("#variant-selector-id").innerHTML=t,document.querySelector("#user__bucket-list-panel").innerHTML=e.html,setTimeout(()=>{new AccordionList(document.querySelector("#modal-bucket-list"))},100),"undefined"!=typeof Splide&&(document.querySelectorAll("#user__bucket-list-panel .splide-type-1").forEach(e=>{new Splide(e,{fixedWidth:"260px",gap:"20px",lazyLoad:"nearby",pagination:!1,padding:{right:"20px",left:"20px"},perPage:2,perMove:1}).mount()}),document.querySelectorAll("#user__bucket-list-panel .splide-promo-1").forEach(e=>{new Splide(e,{fixedWidth:"260px",gap:"20px",lazyLoad:"nearby",pagination:!1,padding:{right:"1px",left:"0"},perPage:2,perMove:1}).mount()}))}));var m=document.querySelectorAll('[data-popup-modal="variant-selection"] .table-variant .active');[].forEach.call(m,(function(e){e.classList.remove("active"),e.querySelector("td",0).classList.remove("f-bold")})),e.classList.add("active"),e.querySelector(".table-variant td",0).classList.add("f-bold")})}),document.querySelectorAll('.otr__year-change input[type="radio"]').forEach(e=>{e.addEventListener("change",()=>{var e=document.querySelector('.otr__year-change input[name="down_payment"]:checked').value,t=document.querySelector('.otr__year-change input[name="year"]:checked').value;document.querySelectorAll("div[data-otr-yearpercentage]").forEach(e=>{e.classList.add("hide")}),document.querySelectorAll('div[data-otr-yearpercentage="'+t+"-"+e+'"]').forEach(e=>{e.classList.remove("hide")})})}),document.querySelector("#mode-review-tag #tab-all")&&!document.querySelector("#mode-review-tag #tab-all").classList.contains("active")&&window.scrollTo({top:document.querySelector("#tab__model-review").offsetTop,behavior:"smooth"}),document.querySelectorAll('[data-popup-trigger="dp-tenure-selection"]').forEach(e=>{e.addEventListener("click",()=>{document.getElementById(e.dataset.targetTab).dispatchEvent(new Event("click"))})}),document.querySelectorAll('[data-popup-modal="dp-tenure-selection"] input[name="year"]').forEach(e=>{e.addEventListener("change",()=>{gd.common.closePopup(document.querySelector('[data-popup-modal="dp-tenure-selection"]'))})}),document.querySelectorAll('[data-popup-modal="dp-tenure-selection"] input[name="down_payment"]').forEach(e=>{e.addEventListener("change",()=>{document.getElementById("tab-petrol-months").dispatchEvent(new Event("click"))})}),document.addEventListener("click",e=>{let t=e.target;if("more-buckets"!=t.getAttribute("id"))return!1;document.querySelector("#user__bucket-list-panel").getElementsByClassName("hide").length>0?(document.querySelectorAll("#user__bucket-list-panel .hide").forEach(e=>{e.classList.remove("hide"),e.classList.add("show")}),t.innerHTML=t.getAttribute("data-view-less"),t.classList.remove("arrow-down"),t.classList.add("arrow-up"),t.classList.contains("promo-show-more-btn")&&t.classList.add("hide"),dataLayer.push({event:gd.config.widgetTracking,category:"offer",component_name:"ModelPage.PriceTab",section_name:"offer",action:"click_view_all_price_bucket",label:""})):(document.querySelectorAll("#user__bucket-list-panel .show").forEach(e=>{e.classList.remove("show"),e.classList.add("hide")}),t.innerHTML=t.getAttribute("data-view-more"),t.classList.remove("arrow-up"),t.classList.add("arrow-down"))}),document.addEventListener("DOMContentLoaded",(function(){window.location.hash&&setTimeout((function(){let e=0,t=document.querySelector("#loan-calculator"),a=document.querySelector(".model-nav"),o=(a?a.offsetHeight:0)+16;for(;t;)e+=t.offsetTop,t=t.offsetParent;let r=e-o;window.scrollTo(0,r)}),100)})),window.onload=function(){getReview()};